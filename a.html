<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>דוח קופות - גרסה מתוקנת</title>
    <style>
        /* --- עיצוב בסיסי ונקי --- */
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f0f0f0; /* רקע אפור בהיר למסך */
        }

        /* --- קומה 1: כותרות עליונות --- */
        .top-section {
            background-color: #fff;
            padding: 15px;
            border: 1px solid #ccc;
            margin-bottom: 20px; /* מרווח בטוח מהכפתורים */
            display: flex;
            gap: 30px;
            align-items: center;
        }

        .input-group {
            display: flex;
            flex-direction: column;
        }

        .input-group label {
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 5px;
        }

        .input-group input {
            padding: 8px;
            font-size: 16px;
            border: 1px solid #999;
            width: 200px;
            background: #fff;
        }

        /* --- קומה 2: כפתורים וחיפוש --- */
        .controls-section {
            background-color: #e2e2e2;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px; /* מרווח בטוח מהטבלה */
            display: flex;
            align-items: center;
            gap: 15px;
            border: 1px solid #ccc;
        }

        .search-box {
            flex-grow: 1;
        }
        
        .search-box input {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            border: 1px solid #999;
            box-sizing: border-box; /* שלא יחרוג מהרוחב */
        }

        button {
            padding: 10px 20px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            color: white;
            border: none;
            border-radius: 4px;
        }

        .btn-add { background-color: #28a745; } /* ירוק */
        .btn-print { background-color: #007bff; } /* כחול */
        .btn-reset { background-color: #dc3545; } /* אדום */

        /* --- קומה 3: הטבלה --- */
        .table-section {
            background-color: #fff;
            padding: 10px;
            border: 1px solid #ccc;
        }

        table {
            width: 100%;
            border-collapse: collapse; /* גבולות צמודים */
        }

        th, td {
            border: 1px solid #000;
            padding: 10px;
            text-align: right;
        }

        th {
            background-color: #ddd;
        }

        /* שדות קלט בתוך הטבלה */
        td input {
            width: 100%;
            border: none;
            font-size: 16px;
            background: transparent;
            outline: none;
        }
        
        td input:focus {
            background-color: #f0f8ff; /* צבע רקע עדין בזמן כתיבה */
        }

        /* --- הגדרות הדפסה (קריטי!) --- */
        @media print {
            body { 
                background-color: white; 
                margin: 0;
            }
            
            /* הסתר את אזור הכפתורים והחיפוש בהדפסה */
            .controls-section, .btn-delete-row {
                display: none !important;
            }

            /* הסר מסגרות ורקעים מהכותרות העליונות */
            .top-section {
                border: none;
                margin-bottom: 10px;
                padding: 0;
            }

            .top-section input {
                border: none;
                border-bottom: 1px solid #000; /* רק קו תחתון */
                width: auto;
            }

            /* וודא שהטבלה שחורה וברורה */
            .table-section {
                border: none;
                padding: 0;
            }
            
            th {
                background-color: #eee !important;
                -webkit-print-color-adjust: exact;
            }
        }
    </style>
</head>
<body>

    <div class="top-section">
        <div class="input-group">
            <label>יום:</label>
            <input type="text" id="dayInput" placeholder="רשום יום...">
        </div>
        <div class="input-group">
            <label>שם:</label>
            <input type="text" id="nameInput" placeholder="שם האחראי...">
        </div>
        <div class="input-group">
            <label>שם קופה/קו:</label>
            <input type="text" id="routeInput" placeholder="רשום שם קופה...">
        </div>
    </div>

    <div class="controls-section">
        <div class="search-box">
            <input type="text" id="searchInput" onkeyup="filterTable()" placeholder="חפש לפי שם קופה או נתון אחר...">
        </div>
        <button class="btn-add" onclick="addRow()">+ הוסף שורה</button>
        <button class="btn-print" onclick="window.print()">הדפס דף</button>
        <button class="btn-reset" onclick="resetTable()">נקה הכל</button>
    </div>

    <div class="table-section">
        <table id="mainTable">
            <thead>
                <tr>
                    <th style="width: 25%;">שם קופה</th>
                    <th style="width: 15%;">מספר משטחים</th>
                    <th style="width: 15%;">כמות משחקים</th>
                    <th style="width: 20%;">הודפס משחקים</th>
                    <th style="width: 20%;">הודפס פירוט</th>
                    <th style="width: 5%;" class="btn-delete-row"></th>
                </tr>
            </thead>
            <tbody id="tableBody">
                </tbody>
        </table>
    </div>

<script>
    // הגדרת יום ברירת מחדל
    const days = ["ראשון", "שני", "שלישי", "רביעי", "חמישי", "שישי", "שבת"];
    document.getElementById('dayInput').value = days[new Date().getDay()];

    // פונקציה להוספת שורה
    function addRow() {
        const tbody = document.getElementById('tableBody');
        const row = document.createElement('tr');
        
        row.innerHTML = `
            <td><input type="text" placeholder="..."></td>
            <td><input type="number" placeholder="0"></td>
            <td><input type="number" placeholder="0"></td>
            <td><input type="text" placeholder="..."></td>
            <td><input type="text" placeholder="..."></td>
            <td class="btn-delete-row" style="text-align:center; cursor:pointer; color:red; font-weight:bold;" onclick="removeRow(this)">X</td>
        `;
        tbody.appendChild(row);
    }

    // פונקציה למחיקת שורה ספציפית
    function removeRow(btn) {
        if(confirm("למחוק שורה זו?")) {
            btn.parentNode.remove();
        }
    }

    // פונקציית חיפוש וסינון
    function filterTable() {
        const input = document.getElementById("searchInput");
        const filter = input.value.toUpperCase();
        const table = document.getElementById("mainTable");
        const tr = table.getElementsByTagName("tr");

        // עובר על כל השורות (מדלג על הכותרת שהיא אינדקס 0)
        for (let i = 1; i < tr.length; i++) {
            let found = false;
            const inputs = tr[i].getElementsByTagName("input");
            
            // בודק בכל התאים בשורה
            for (let j = 0; j < inputs.length; j++) {
                if (inputs[j].value.toUpperCase().indexOf(filter) > -1) {
                    found = true;
                    break;
                }
            }
            
            if (found) {
                tr[i].style.display = "";
            } else {
                tr[i].style.display = "none";
            }
        }
    }

    // ניקוי טבלה
    function resetTable() {
        if(confirm("האם לנקות את כל הטבלה?")) {
            document.getElementById('tableBody').innerHTML = "";
            for(let i=0; i<5; i++) addRow(); // מחזיר 5 שורות ריקות
        }
    }

    // יצירת 5 שורות ראשונות אוטומטית בעת הטעינה
    window.onload = function() {
        document.getElementById('dayInput').value = days[new Date().getDay()];
        for(let i=0; i<10; i++) {
            addRow();
        }
    };
</script>

</body>
</html>
